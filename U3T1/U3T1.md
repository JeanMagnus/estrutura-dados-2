# Trabalho final

**Criado por:**
* ***Aluno: Jean Magnus Araujo de Souza Junior - 20240001171***
---

Este trabalho tem como objetivo gerar uma rede dirigida a partir dos links das páginas do Wikipédia considerando a fusão de 3 páginas inicias, que serão as SEEDS. E então, trabalhar de forma gráfica com o auxilio do Gephi, calculando e analisando as métricas para cada atributo necessário.

Para organização, os processos foram divididos em requisitos para melhor distribuição de ideias e avaliação do professor.

- Os códigos aqui utilizados foram disponibilizados pelo [professor Ivanovitch](https://github.com/ivanovitchm/datastructure/blob/main/lessons/week_09/Wikipedia.ipynb) para o desenvolvimento do projeto.


---

## Requisito 1

O primeiro passo será a criação do grafo para cada uma das três seeds escolhidas. 

O contexto geral da analise dos dados será **Astronomia**, e as seeds escolhidas foram as seguintes:

* Black dwarf (Anã negra)
* Binary star (Estrela binária)
* Stellar mass (Massa estelar)

Dessa forma, foi desenvolvido o código com auxilio do código disponibilizado pelo professor, que está no seguinte notebook:

- Link

```python
!pip install wikipedia

from operator import itemgetter
import networkx as nx
import wikipedia
import matplotlib.pyplot as plt



# Retorna o número de arestas e nós do grafo
def print_edges_nodes(graph):

    return print("{} nodes, {} edges".format(len(graph), nx.number_of_edges(graph)))

# Criando grafo a partir da seed
def build_graph_from_seed(SEED):

    todo_lst = [(0, SEED)] # The SEED is in the layer 0
    todo_set = set(SEED) # The SEED itself
    done_set = set() # Nothing is done yet

    g = nx.DiGraph()
    layer, page = todo_lst[0]

    while layer < 2:
      # Remove the name page of the current page from the todo_lst,
      # and add it to the set of processed pages.
      # If the script encounters this page again, it will skip over it.
      del todo_lst[0]
      done_set.add(page)

      # Show progress
      print(layer, page)

      # Attempt to download the selected page.
      try:
        wiki = wikipedia.page(page)
      except:
        print("Could not load", page)
        layer, page = todo_lst[0]
        continue

      for link in wiki.links:
        link = link.title()
        if link not in STOPS and not link.startswith("List Of"):
          if link not in todo_set and link not in done_set:
            todo_lst.append((layer + 1, link))
            todo_set.add(link)
          g.add_edge(page, link)
      layer, page = todo_lst[0]

    return g

```
Adicionando as seeds escolhidas e critérios de parada:

```python
#https://en.wikipedia.org/wiki/Complex_network
SEED1 = "Black dawrf".title()
SEED2 = "Binary star".title()
SEED3 = "Stellar mass".title()

STOPS = ("International Standard Serial Number",
         "International Standard Book Number",
         "National Diet Library",
         "International Standard Name Identifier",
         "International Standard Book Number (Identifier)",
         "Pubmed Identifier",
         "Pubmed Central",
         "Digital Object Identifier",
         "Arxiv",
         "Proc Natl Acad Sci Usa",
         "Bibcode",
         "Library Of Congress Control Number",
         "Jstor",
         "Doi (Identifier)",
         "Isbn (Identifier)",
         "Pmid (Identifier)",
         "Arxiv (Identifier)",
         "Bibcode (Identifier)")
```

A partir dos grafos encontrados, foi realizado histogramas para a analise do grau dos nós, juntamente com os seus vizinhos, de cada grafo.

![Histograma do grafo 1](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/graf1.png)

explicação

![Histograma do grafo 2](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/graf2.png)

explicação

![Histograma do grafo 3](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/graf3.png)

Logo então foram removidas as páginas duplicadas e a partir disso feito o truncamento da rede. Os detalhes podem ser vistos no [notebook]().

Com o truncamento feito, foi realizado a junção dos 3 grafos para um único grafo, que será chamado de grafo final. Esse grafo final possui 11838 nós e 100776 arestas.

A princípio, a rede de forma visual no Gephi ficou da seguinte forma:

![Rede](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/comm.png)

O algoritmo detectou 9 comunidades e as separou por cores para uma melhor visualização da rede.


## Requisito 2

Utilizando as ferramentas disponíveis no Gephi, foram calculadas as métricas do grafo final.

### Degree centrality

A primeira métrica calculada foi a **Degree centrality** (centralidade de grau), que consiste  na quantificação da importância de um nó com base no número de conexões diretas que ele possui, sendo útil para identificar os nós mais conectados e, portantom mais influentes em uma rede.

Dessa forma, encontramos o maior número sendo 1264 que seria o do nó *"Solar Eclipse"* e o menor sendo 0, representado por vários nós. Sendo assim, a página *Solar Eclipse* seria a mais influente da rede, possuindo mais conexões.

![Degree](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/degree.png)


### Closeness centrality

A segunda métrica foi a **Closeness centrality** que mede a proximidade de um nó em relação a todos os outros na rede. É calculada como o inverso da soma das distâncias mínimas de um nó para todos os outros nós. Ou seja, detecta nós que podem acessar outros nós rapidamente.

Nesse caso, foram encontrados o maior valor sendo 1, representado por cinco páginas com o mesmo valor: Crux, D. Reidel, Gravitional Capture e Wolfram Demonstrations Project. E o menor valor foi 0.

![closeness](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/closeness.png)

### Betweeness centrality

A terceira métrica foi a **Betweeness centrality** que mede quantas vezes um nó aparece nos caminhos mínimos entre outros pares de nós. Indicando o papel de um nó como intermediário ou "ponte" na rede.

O maior valor encontrado foi de 0.003987, pertencendo à página *Binary Star*. Dessa forma, podemos concluir que ela atua como um link/ponte para outros nós na rede, sendo encontrada em várias outras páginas de forma mais recorrente. Já o menor valor foi de 0.

![between](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/betwenness.png)

### Eigenvector centrality

A quarta e última métrica foi a **Eigenvector centrality** que mede a influência de um nó na rede com base na importância dos nós a que está conectado. Um nó com alto índice está conectado a outros nós influentes.

O maior valor foi de 1, representado pela página *Star*, sendo ela a mais conectada a outros nós que são influentes na rede, o que faz sentido, já que todo tema envolvendo essa análise de dados está relacionado à estrelas e suas características.

![eigenvector](https://github.com/JeanMagnus/estrutura-dados-2/blob/main/U3T1/imgs/eigen.png)


